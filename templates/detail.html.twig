{% extends "main.html.twig" %}

{% block header %}
  <img src="assets/img/logo-v2.png" alt="Verrukkulluk logo" style="height:50px;">
{% endblock %}

{% block content %}
  {# data kan array(1) of single record zijn #}
  {% set g = (data is iterable) ? (data|first) : data %}

  <div class="mb-3">
    <a class="btn btn-outline-secondary btn-sm" href="index.php?action=homepage">← Terug</a>
  </div>

  {# MAIN RECIPE CARD #}
  <div class="card shadow-sm mb-4">
    <div class="row g-0">

      {# IMAGE LEFT #}
      <div class="col-md-6">
        {% if g.afbeelding %}
          <img
            src="{{ g.afbeelding }}"
            alt="gerecht"
            class="img-fluid w-100"
            style="height: 320px ; object-fit: cover;"
          >
        {% else %}
          <div style="height: 320px;" class="bg-light"></div>
        {% endif %}
      </div>

      {# INFO RIGHT #}
      <div class="col-md-6 p-4">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h3 class="mb-1">{{ g.gerecht_type }}</h3>
            <div class="text-muted mb-3">
              {{ g.keuken_type }} • Door {{ g.usernaam }} • {{ g.datum_toegevoegd }}
            </div>
          </div>

          {# placeholder sterren (later kun je rating toevoegen) #}
          <div class="text-warning" style="font-size: 18px;">★★★★★</div>
        </div>

        <p class="mb-3">
          {{ attribute(g, 'korte omschrijving') }}
        </p>

        <p class="mb-4">
          {{ attribute(g, 'lange omschrijving') }}
        </p>

        {# BUTTON "OP LIJST" - later koppel je dit aan boodschappen action #}
        <a class="btn btn-danger" href="index.php?action=boodschappen_toevoegen&gerecht_id={{ g.id }}">
          Op lijst
        </a>

        <span class="ms-3 text-muted">
          <i class="fa fa-heart-o"></i>
        </span>
      </div>

    </div>
  </div>

  {# INGREDIENTS CARD #}
  <div class="card shadow-sm p-4">
    <h4 class="mb-3">Ingrediënten</h4>

    <div class="list-group">
      {% for ingr in g.ingredients %}
        <div class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ ingr.naam }}</strong>
          </div>
        </div>
      {% else %}
        <div class="list-group-item">Geen ingrediënten gevonden.</div>
      {% endfor %}
    </div>
  </div>
{% endblock %}